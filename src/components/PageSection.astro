---
import SectionList from '../components/PageSectionList.astro';
import Button from '../components/Button.astro';
import VideoBacking from '../components/VideoBacking.astro';
import { Image } from 'astro:assets';
const { section } = Astro.props;
---

<section>
  <header>
    <VideoBacking />
    <Image src={section.photo} alt=`Macro industrial machinery for ${section.title}` width="390" height="150" loading="eager" />
    <h2>{section.title}</h2>
  </header>
  <div class={(!section.quote && !section.button) && 'full'}>
    {
      section.listType === 'ordered'
        ? <ol><SectionList sectionList={section.list} /></ol>
        : <ul><SectionList sectionList={section.list} /></ul>
    }
  </div>
  {(section.quote || section.button) && (
    <footer>
      {section.quote && <h3>{section.quote}</h3>}
      {section.button && <Button url={section.buttonLink} target="_self" title={section.button} />}
    </footer>
  )}
</section>

<style>
    section {
        position: relative;
        margin-bottom: var(--pad-small);
        background-color: var(--color-black);
    }

    section:first-child {
        margin-top: var(--pad-small);
    }

    section:last-child {
        margin-bottom: 0;
    }

    header {
        position: relative;
        display: block;
        height: 150px;
    }

    header img {
        position: absolute;
        z-index: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center center;
        mix-blend-mode: hard-light;
    }

    header:after {
        content: '';
        position: absolute;
        z-index: 1;
        display: block;
        width: 100%;
        height: 100%;
        background: linear-gradient(to bottom, transparent, var(--color-black));
    }

    header h2 {
        position: absolute;
        z-index: 10;
        left: var(--pad-small);
        bottom: var(--pad-small);
        font-size: var(--font-size--huge);
        color: var(--color-yellow);
    }

    ul {
        list-style-type: square;
    }

    div,
    footer {
        padding: 0 var(--pad-small);
        max-width: var(--layout-max--reading);
    }

    footer {
        position: relative;
        padding-bottom: var(--pad-small);
        max-width: var(--layout-max--reading);
    }

    footer h3 {
        font-family: var(--font-family--serif);
        font-weight: bold;
        font-style: italic;
        text-transform: lowercase;
        color: var(--color-white);
        margin-bottom: var(--pad-small);
        font-size: 1.25em;
    }

    @media (min-width: 960px) {
        header {
            height: 16rem;
        }

        header:after {
            background: linear-gradient(to right, var(--color-black), transparent);
        }

        header h2 {
            bottom: 50%;
            left: 0;
            transform: translateY(50%);
        }

        div {
            padding: var(--pad-small) var(--pad-small) 0 0;
            float: left;
            width: 50%;
        }

        div.full {
            width: 100%;
            float: none;
        }

        footer {
            width: 50%;
            padding: var(--pad-small) var(--pad) 0 0;
            float: right;
        }
    }
</style>